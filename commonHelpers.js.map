{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport async function searchImages(keyword, page) {\n  try {\n  const apiKey = '43190537-4b40a622c8cb8590492e33b18';\n  const params = {\n    key: apiKey,\n    q: keyword,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: 1,\n    per_page: 15,\n  };\n\n  const response = await axios.get('https://pixabay.com/api/', { params });\n\n    if (response.data.hits.length === 0) {\n      iziToast.error({\n        title: 'Sorry',\n        message:\n          'There are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    }\n    \n\n    return response.data.hits;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { Spinner } from 'spin.js';\n\nlet spinner = null; // Змінна для зберігання індикатора завантаження\nlet instance = null; // Змінна для зберігання екземпляру SimpleLightbox\n\n// Функція для створення і показу індикатора завантаження\nfunction showLoader() {\n  spinner = new Spinner().spin();\n  document.getElementById('loader').appendChild(spinner.el);\n}\n\n// Функція для приховування індикатора завантаження\nfunction hideLoader() {\n  if (spinner) {\n    spinner.stop();\n    document.getElementById('loader').innerHTML = ''; // Очищаємо контейнер індикатора завантаження\n  }\n}\n\nexport function displayImages(images) {\n  showLoader(); // Показуємо індикатор завантаження перед відображенням зображень\n  const galleryElement = document.getElementById('gallery');\n\n  images.forEach(image => {\n    const imageCard = createImageCard(image);\n    galleryElement.insertAdjacentHTML('beforeend', imageCard);\n  });\n\n  hideLoader(); // Приховуємо індикатор завантаження після відображення зображень\n    // Плавне прокручування сторінки\n  smoothScrollBy(galleryElement);\n}\n\n// Функція для плавного прокручування сторінки на дві висоти карточки галереї\nfunction smoothScrollBy(element) {\n  const cardHeight = getCardHeight(element.firstElementChild);\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\n// Функція для отримання висоти карточки галереї\nfunction getCardHeight(cardElement) {\n  const cardRect = cardElement.getBoundingClientRect();\n  return cardRect.height;\n}\n\n  // Оновлюємо галерею, тільки якщо були додані нові картки зображень\n  if (!instance) {\n    createSimpleLightbox(); // Якщо екземпляр не існує, створюємо новий\n  } else {\n    instance.refresh(); // Якщо екземпляр вже існує, оновлюємо його\n  }\n  \n\n\n// Створення картки зображення\nexport function createImageCard(image) {\n  return `<div class=\"card\">\n  <div class=\"image-container\">\n   <a href=\"${image.largeImageURL}\" data-lightbox=\"image\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"image\" />\n      </a>\n  </div>\n  <table class=\"table\">\n        <tr> \n          <th class=\"options-name\">Likes</th>\n          <th class=\"options-name\">Views</th>\n          <th class=\"options-name\">Comments</th>\n          <th class=\"options-name\">Downloads</th>\n        </tr>\n        <tr> \n          <td class=\"value-description\">${image.likes}</td>\n          <td class=\"value-description\">${image.views}</td>\n          <td class=\"value-description\">${image.comments}</td>\n          <td class=\"value-description\">${image.downloads}</td>\n        </tr>\n    </table>\n  </div>`;\n}\n\nfunction createSimpleLightbox() {\n  instance = new SimpleLightbox('#gallery a', {\n    captionDelay: 250, // зображення підпису за 250 ms\n    captionsData: 'alt', // підпис зображення\n  });\n}\n\n\n","//вся логіка роботи додатка\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { searchImages } from './js/pixabay-api.js';\nimport { displayImages } from './js/render-functions.js';\n\nlet page = 1;\nconst perPage = 15;\nconst totalHits = Math.ceil(100 / perPage);\n\n\n\n// Отримання елементів DOM\nconst form = document.querySelector('form');\nconst searchInput = document.querySelector('#search-input');\nconst gallery = document.getElementById('gallery'); // Отримання елемента галереї\nconst loadMoreBtn = document.createElement('button'); // Створення кнопки \"Load more\"\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.classList.add('load-more-btn');\nloadMoreBtn.style.display = 'none'; // Початково ховаємо кнопку\ngallery.insertAdjacentElement('afterend', loadMoreBtn);\n\n// Обробник події для кнопки \"Load more\"\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\n// Функція для завантаження додаткових зображень\nasync function loadMoreImages() {\n  try {\n    const keyword = searchInput.value.trim();\n    const images = await searchImages(keyword);\n\n    displayImages(images);\n    page += 1;\n\n    // Перевірка, чи дійшли до кінця колекції\n    if (page > totalHits) {\n      gallery.innerHTML = '';\n      loadMoreBtn.style.display = 'none';\n      iziToast.error({\n        title: 'End of Search Results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    console.error('Error loading more images:', error);\n  }\n}\n\n// Обробник події для форми пошуку\nform.addEventListener('submit', async event => {\n  event.preventDefault(); // Заборона стандартної поведінки форми\n  const keyword = searchInput.value.trim(); // Отримання ключового слова для пошуку\n  \n  // Перевірка на порожній рядок\n  if (keyword === '') {\n    displayErrorMessage('Please enter a search keyword');\n    return iziToast.error({\n      message: 'Please enter a search keyword',\n      position: 'topRight',\n    });\n  }\n\n  try {\n    gallery.innerHTML = ''; // Очищення галереї перед новим пошуком\n    const images = await searchImages(keyword, page); // Виклик функції пошуку з передачею сторінки\n    if (images.length > 0) {\n      displayImages(images); // Відображення отриманих зображень\n      // Показуємо кнопку \"Завантажити більше\"\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    console.error('Error searching images:', error);\n    gallery.innerHTML = ''; // Очищення галереї в разі помилки\n    loadMoreBtn.style.display = 'none'; // Приховуємо кнопку \"Завантажити більше\" в разі помилки\n  }\n});\n\n\n"],"names":["searchImages","keyword","page","params","response","axios","iziToast","error","spinner","instance","showLoader","Spinner","hideLoader","displayImages","images","galleryElement","image","imageCard","createImageCard","smoothScrollBy","element","cardHeight","getCardHeight","cardElement","createSimpleLightbox","SimpleLightbox","perPage","totalHits","form","searchInput","gallery","loadMoreBtn","loadMoreImages","event"],"mappings":"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"}